<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Weather App</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="card">
      <!--This is the input for searching cities-->
      <div class="search">
        <input type="text" placeholder="enter city name" spellcheck="false" />
        <button><img src="images/search.png" alt="search image" /></button>
      </div>
      <div class="weather">
        <!--This part is for showing the weather, it contains an image of the current weather,
            temperature, city name, humidity and wind.
            All of this information is collected from the openweather API-->
        <img src="images/rain.png" alt="" class="weather-icon" />
        <h1 class="temp">22°c</h1>
        <h2 class="city">Augsburg</h2>
        <div class="details">
          <div class="col">
            <img src="images/humidity.png" alt="" />
            <div>
              <p class="humidity">50%</p>
              <p>Humidity</p>
            </div>
          </div>
          <div class="col">
            <img src="images/wind.png" alt="" />
            <div>
              <p class="wind">15 km/h</p>
              <p>Wind Speed</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      const apiKey = "73b84783260e610125825abc05dce81e";
      const apiUrl =
        "https://api.openweathermap.org/data/2.5/weather?units=metric&q=";
      const searchBox = document.querySelector(".search input");
      const searchBtn = document.querySelector(".search button");
      const weatherIcon = document.querySelector(".weather-icon");

      //this method is for checking the weather of the searched city by accessing the API
      async function checkWeather(city) {
        const response = await fetch(apiUrl + city + "&appid=" + apiKey);
        var data = await response.json();

        //Here I am getting the information from the API into HTML
        console.log(data);
        document.querySelector(".city").innerHTML = data.name;
        document.querySelector(".temp").innerHTML =
          Math.round(data.main.temp) + "°c";
        document.querySelector(".humidity").innerHTML =
          data.main.humidity + "%";
        document.querySelector(".wind").innerHTML = data.wind.speed + "km/h";

        //This part is for setting the image depending on the precipitations
        if (data.weather[0].main == "Clouds") {
          weatherIcon.src = "images/clouds.png";
        } else if (data.weather[0].main == "Clear") {
          weatherIcon.src = "images/clear.png";
        } else if (data.weather[0].main == "Rain") {
          weatherIcon.src = "images/rain.png";
        } else if (data.weather[0].main == "Drizzle") {
          weatherIcon.src = "images/drizzle.png";
        } else if (data.weather[0].main == "Mist") {
          weatherIcon.src = "images/mist.png";
        }
      }
      //Connecting the method to the search button
      searchBtn.addEventListener("click", () => {
        checkWeather(searchBox.value);
      });
      checkWeather("Augsburg");
    </script>
  </body>
</html>
